# Lab 7 实验指导

## 理解 getElementPtr 指令

在你准备冻手写这个 lab 之前，我们**强烈建议**你先自己写几个带有数组的程序并自己编译为`llvm ir`看一下不同情况下`Clang`是怎么做的，不然你可能会对`getElementPtr`（下面简称为 GEP) 这个指令感到迷惑。如果你看完实验指导并且生成了自己的代码之后还是有疑问，可以浏览 [这里](https://llvm.org/docs/GetElementPtr.html)。

LLVM 的指针操作 GEP 指令几乎是所有指针计算的关键。
GEP 指令的工作是“计算”，本身并不进行任何数据的访问和修改，他有至少两个参数，第一个是要进行计算的原始指针，这往往是一个结构体指针或者是数组首地址的指针。第二个以及以后的参数都被称为`indices`，表示了要进行的计算的参数的位置。

GEP 指令对于新上手的程序员来说比较难理解，所幸我们实验中涉及到指针计算的部分只有数组，而且高维数组可以用一个一维数组来模拟，比如一个`[4][5]`的二维数组，我们可以用一个`[20]`的一维数组来模拟，这就极大的减少了我们的工作量。
